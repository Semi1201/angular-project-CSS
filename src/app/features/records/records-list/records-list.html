<div *ngIf="loading" class="loading">
    Loading...
</div>

<div *ngIf="!loading && errorMsg" class="err">
    {{ errorMsg }}
</div>

<div class="toolbar">
    <button class="btn btn-outline-success" (click)="exportExcel()" [disabled]="loading || records.length === 0">
        Export Excel
    </button>

    <button class="btn btn-outline-danger" (click)="exportPdf()" [disabled]="loading || records.length === 0">
        Export PDF
    </button>
</div>


<div class="table-responsive">
    <table class="table table-striped table-hover align-middle mb-0">
        <thead class="table-light">
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Customer ID</th>
                <th scope="col">Last Name</th>
                <th scope="col">Format</th>
                <th scope="col">Genre</th>
                <th scope="col" class="text-end">Actions</th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let r of records">
                <td class="fw-semibold">{{ r.id }}</td>
                <td>{{ r.customerId }}</td>
                <td>{{ r.customerLastName }}</td>
                <td><span class="badge bg-secondary">{{ r.format }}</span></td>
                <td><span class="badge bg-info text-dark">{{ r.genre }}</span></td>

                <td class="text-end">
                    <div class="btn-group btn-group-sm" role="group" aria-label="Actions">
                        <button class="btn btn-outline-primary" (click)="view(r.id!)">
                            View
                        </button>

                        <button class="btn btn-outline-warning" (click)="edit(r.id!)" [disabled]="!canUpdate">
                            Update
                        </button>


                        <button class="btn btn-outline-danger" (click)="deleteRecord(r.id!)"
                            [disabled]="!canDelete || deletingId === r.id">
                            {{ deletingId === r.id ? 'Deleting...' : 'Delete' }}
                        </button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>